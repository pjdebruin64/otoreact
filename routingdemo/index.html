<!DOCTYPE html>
<html>
  <head>
    <style>
      main {
        border: solid 2px green; padding: 12px; height: 400px;
      }
      menu a {
        padding: 6px 12px; color: white; background-color: green;
      }
      pre {margin-left: 2em}
      table {
        border-collapse: collapse;
      }
      tr > * {
        padding: 3px 6px; border: solid 1pt blue;
      }
    </style>

    <script type=module>
      import {RVAR, RFetch} from './OtoReact.js';

      globalThis.sourceCode = document.documentElement.outerHTML

      RVAR('customers', [
        {no: '001', name: "Mary", address: "Washington"},
        {no: '002', name: "John", address: "Amsterdam"},
        {no: '003', name: "Karin", address: "Tokio"},
        {no: '004', name: "Peter", address: "Bergambacht"},
      ]);

    </script>
  </head>

  <body rhtml="basePattern: 'routingdemo/', bAutoReroute: true" hidden reacton="docLocation">

    <main>    
      <menu>
        <a href="{docLocation.basepath}inventory">Inventory</a>
        <a href="{docLocation.basepath}customers">Customer list</a>
      </menu>
      
      <case #value="docLocation.subpath">
  
        <when urlmatch="inventory">
          <title>Inventory</title>
          <h1>Inventory</h1>
          (Show or include inventory here)
        </when>
  
        <when urlmatch="customers">
          <title>Customer list</title>
          <h1>Customer list</h1>
          <table.>
            <tr.><th.>No</th.><th.>Name</th.></tr.>
            <FOR let="cust" of="customers.V" reacton="customers">
              <tr.>
                <td.><a href="customer/{cust.no}">{cust.no}</a></td.>
                <td.>{cust.name}</td.>
              </tr.>
            </FOR>
          </table.>
        </when>
  
        <when urlmatch="customer/{customerNo}">
          <title>Customer {customerNo}</title>
          <h1>Customer details</h1>
          <style scope="local">
            td:nth-child(1) { font-weight: bold; }
            td:nth-child(2) { min-width: 10em;   }
          </style>
          <def var="cust" #value="customers.V.find(cust => cust.no == customerNo)"></def>
          <table #if="cust">
            <tr><td>No</td>     <td>{cust.no}</td></tr>
            <tr><td>Name</td>   <td>{cust.name}</td></tr>
            <tr><td>Address</td><td>{cust.address}</td></tr>
          </table>
        </when>
  
        <else>
          <h1>Routing demo</h1>
          <title>Routing demo</title>
          Please choose from the menu bar.
        </else>
  
      </case>
    </main>

    <hr>
    Current values of:
    <table>
      <tbody>
        <tr> <th>location.origin</th>   <th>location.pathname</th>   <th>docLocation.basepath</th>   <th>docLocation.subpath</th>   </tr>
        <tr> <td>{location.origin}</td> <td>{location.pathname}</td> <td>{docLocation.basepath}</td> <td>{docLocation.subpath}</td> </tr>
      </tbody>
    </table>

    <hr>
    Full source code:
    <pre>
&lt;!DOCTYPE html>
{sourceCode.replaceAll('='+'""','')}
    </pre>
  </body>
</html>