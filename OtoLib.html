<MODULE>
  <!--
    This component redefines <a> to ensures that all links with no target and an external href, get a target='_blank' attribute
  -->
  <component>
    <signature>
      <A href #target? ...rest><content></content></A>
    </signature>

    <template><a. #href="href"
      #target="!target && /^http/i.test(href) ? '_blank' : target"
      ...rest
      ><content>
    </content></a.></template>
  </component>

  <!--
    A <radiogroup> is a group of labelled radiobuttons with the same name.
    The selected button can be set and requested through two-way parameter @value.
    The group name may be omitted; it will be autogenerated.
    An 'onclick' handler will be called whenever any label is clicked.

    The <radiobutton>s within the group should each have a #value.
    They may each have an 'onclick' handler.
    A 'class' will be attached to the label.
    Other parameters will be passed to the input element.
  -->
  <def var="num" #value="{V:0}"></def>
  <component>
    <signature>
      <RADIOGROUP name? @value? onclick?>
        <content>
          <radiobutton #value onclick? class? ...rest><content></content></radiobutton>
        </content>
      </RADIOGROUP>
    </signature>

    <template @value=groupValue onclick=groupOnclick>
      <def let="groupName" #value="name || `RadioGroup${num.V++}`"></def>
      <content>
        <radiobutton #value onclick class=butClass ...rest>
          <label #className=butClass>
            <input type=radio #name=groupName #value=value
              #checked="value === groupValue.V"
              onclick="groupValue.V = value; onclick(); groupOnclick();"
              ...rest
            >
            <content></content>
          </label>
        </radiobutton>
      </content>
    </template>
  </component>

  <!--
    A labeled checkbox with a three-valued @value: true | false | null
  -->
  <component>
    <signature>
      <CHECKBOX @value class? ...rest><content></content></CHECKBOX>
    </signature>
    
    <template @value class="className">
      <label #className="className">
        <input type="checkbox"
            #checked="value.V" #indeterminate="value.V==null"
            oninput="value.V= this.indeterminate ? null : this.checked"
            ...rest
        ><content></content>
      </label>
    </template>
  </component>

</MODULE>