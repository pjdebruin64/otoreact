<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!--
        <meta http-equiv=Content-Security-Policy content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.paypal.com https://www.googletagmanager.com">
    -->
    <title>The OtoReact Framework</title>
    <link rel=preload href="OtoReact.js"            as=script crossorigin>
    <link rel=preload href="Lib_Components.html"    as=fetch crossorigin>
    <link rel=preload href="C1_Introduction.html"   as=fetch crossorigin>
    <link rel=preload href="KoninklijkeOtolift.png" as=image>
    <link rel=prefetch href="C2_HtmlElements.html"  as=fetch crossorigin>
    <link rel=prefetch href="C3_Constructs.html"    as=fetch crossorigin>
    <link rel=prefetch href="C4_Scripts.html"       as=fetch crossorigin>
    <link rel="shortcut icon"   href="otoreact.png" type="image/png"/>
    <link rel="stylesheet"      href="index.css">
    <link rel=preload href="webColors.json"         as=fetch crossorigin>
    <link rel=preload href="dayjs.min.js"           as=fetch crossorigin>


    <script>
        const 
            wiki = "https://en.wikipedia.org/wiki/",
            MDN="https://developer.mozilla.org/en-US/docs/",
            src="./",
            locationExternal = !/masterlist\/(test\/)?otoreact/i.test(location.href);
    </script>
    <script src="samples.js" defer></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){
            if(!/\/dev\//i.test(location.pathname))
                dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'G-T23W7PMPX4');
    </script>
    <script type=module>
        import {RCompile, RVAR, docLocation} from './OtoReact.js';
        let popup = RVAR('popup', {display: 'none'});

        try {
            RCompile(document.body, {bTiming:true, bAbortOnError: false});

            docLocation.Subscribe(() => {
                document.title =
                    docLocation.subpath == '' ? "The OtoReact Framework"
                    : /^routing$/i.test(docLocation.subpath) ? "OtoReact Routing"
                    : /^otolib$/i.test(docLocation.subpath) ? "The OtoLib library"
                    : /^download$/i.test(docLocation.subpath) ? "OtoReact Download"
                    : "Page not found";

                    //gtag('event', 'page_view');
            }, true);
            
        }
        catch (err) {
            document.body.appendChild(document.createTextNode(err))
        }

    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T23W7PMPX4"></script>
</head>
<body hidden onclick="popup.V={display:'none'}" style.cursor=default>

    <import async src="Lib_Components.html">
        <!-- This component ensures that all <a> elements with no target and an external href, get a target='_blank' attribute -->
        <a href? #target? ...rest><content></content></a>
        
        <!-- Component to demonstrate RHTML -->
        <demo #srctext?="''" #bshow=true #editable?=true rvar?></demo>
        
        <!-- Component that builds a page with header and table of contents-->
        <pageLayout>
            <pageHead></pageHead>
            <leftbar></leftbar>
            <content>
                <h1 id?><content></content></h1>
                <h2 id?><content></content></h2>
                <h3 id?><content></content></h3>
            </content>
        </pageLayout>
    </import>

    <case thisreactson=docLocation #value="docLocation.subpath" hiding>
        <when match="">
            <pageLayout>
                <pageHead>
                    <span class=OtoRed>Reactive HTML</span> through the <span class=OtoRed>OtoReact</span> framework
                </pageHead>

                <section><include src="C1_Introduction.html"></include></section>
                <section><include src="C2_HtmlElements.html"></include></section>
                <section><include src="C3_Constructs.html"></include></section>
                <section><include src="C4_Scripts.html"></include></section>
            </pageLayout>
        </when>
        <when match="routing">
            <include src="Routing.html">
        </when>  
        <when match="download">
            <include src="download.html">
        </when>
        <when match="otolib">
            <pagelayout>
                <pagehead>
                    The <span class=OtoRed>OtoLib</span> library
                </pagehead>
                <h2>OtoLib.html</h2>
                <p>"OtoLib.html" is a small module containing a few general-purpose components:</p>
                <def rvar="otolib" #value="RFetch('./OtoLib.html').then(resp => resp.text())"></def>
                <pre class=sourcecode #innerHTML="otolib.V && ColorCode(otolib.V)" reacton="otolib"></pre>

                <h2>Sample usage</h2>
                <demo #srcText="demoRadiogroup"></demo>
            </pagelayout>
        </when>
        <else>
            <rhead>
                <meta name="robots" content="noindex">
            </rhead>
            Page not found
        </else>    
    </case>

    <def rvar="cookiesAck" store="localStorage"></def>
    <if cond="locationExternal && !cookiesAck.V">
        <div style="position: absolute; left: 30px; bottom: 30px;
        background-color: #FFFBE3; 
        border: 4px solid #FFE75B; padding: 8px; border-radius: 4px;
        outline: 8px solid white"
        >
            This site uses cookies from <a href="https://policies.google.com/technologies/cookies">Google Analytics</a> and from <a href="https://www.paypal.com/webapps/mpp/ua/cookie-full">PayPal</a>.
            <button onclick="cookiesAck.V=true">OK</button>
        </div>
    </if>
    <div 
        style="position: absolute; background-color: #FFFBE3; 
            border: 4px solid #FFE75B; padding: 8px; border-radius: 4px;
            outline: 8px solid white"
        +style="popup.V" thisreactson=popup
    >
        You can find more about me on my <a href="https://www.linkedin.com/in/peter-de-bruin-trautmann/">LinkedIn profile</a>,
        <br>and on my <a href="http://www.peterdebruin.net">personal homepage</a> in Dutch
    </div>
</body>
</html>